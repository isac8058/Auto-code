<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê¹€ì¹˜ ë°œíš¨ pH ì¶”ì ê¸°</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #ff5252 0%, #f48fb1 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.2);
        }
        h1 {
            text-align: center;
            color: #d32f2f;
            margin-bottom: 30px;
        }
        .formula-box {
            background: #ffebee;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 30px;
            font-family: 'Courier New', monospace;
        }
        .fermentation-container {
            display: flex;
            gap: 30px;
            margin: 30px 0;
            flex-wrap: wrap;
            justify-content: center;
        }
        .kimchi-jar {
            width: 200px;
            height: 250px;
            background: linear-gradient(to bottom, #fff 0%, #ffcdd2 100%);
            border: 3px solid #d32f2f;
            border-radius: 20px 20px 50px 50px;
            position: relative;
            overflow: hidden;
        }
        .kimchi-content {
            position: absolute;
            bottom: 0;
            width: 100%;
            background: linear-gradient(to bottom, #ff5252 0%, #d32f2f 100%);
            transition: all 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
        }
        .bubble {
            position: absolute;
            width: 10px;
            height: 10px;
            background: rgba(255,255,255,0.7);
            border-radius: 50%;
            animation: bubble 3s infinite;
        }
        @keyframes bubble {
            0% { bottom: 20%; opacity: 0; }
            50% { opacity: 1; }
            100% { bottom: 90%; opacity: 0; }
        }
        .ph-meter {
            background: #263238;
            color: #00ff00;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            text-align: center;
            margin: 20px 0;
        }
        .ph-display {
            font-size: 3rem;
            margin: 10px 0;
        }
        .ph-scale {
            display: flex;
            justify-content: space-between;
            margin: 20px 0;
            padding: 10px;
            background: linear-gradient(to right, 
                #ff0000 0%, 
                #ff9800 14%, 
                #ffeb3b 28%, 
                #8bc34a 42%, 
                #4caf50 56%, 
                #2196f3 70%, 
                #3f51b5 84%, 
                #9c27b0 100%);
            border-radius: 10px;
            color: white;
            font-weight: bold;
        }
        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        .control-card {
            background: #f5f5f5;
            padding: 20px;
            border-radius: 10px;
        }
        .control-card h3 {
            color: #d32f2f;
            margin-bottom: 15px;
        }
        input[type="range"] {
            width: 100%;
            margin: 10px 0;
        }
        .value-display {
            text-align: center;
            font-size: 1.2rem;
            color: #d32f2f;
            font-weight: bold;
        }
        .ferment-button {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #ff5252, #d32f2f);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.2rem;
            cursor: pointer;
            transition: transform 0.3s;
        }
        .ferment-button:hover {
            transform: scale(1.05);
        }
        .timeline {
            margin: 30px 0;
        }
        .day-marker {
            display: flex;
            align-items: center;
            margin: 15px 0;
            padding: 15px;
            background: #f5f5f5;
            border-radius: 10px;
            transition: all 0.3s;
        }
        .day-marker.active {
            background: #ffebee;
            transform: translateX(10px);
        }
        .day-icon {
            font-size: 2rem;
            margin-right: 15px;
        }
        .chemical-equation {
            background: #e8f5e9;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            text-align: center;
        }
        .bacteria-count {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
        }
        .bacteria-card {
            text-align: center;
            padding: 15px;
            background: #fff3e0;
            border-radius: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¥¬ ê¹€ì¹˜ ë°œíš¨ pH ì¶”ì ê¸°</h1>
        
        <div class="formula-box">
            <h3>pH = -log[Hâº]</h3>
            <p style="margin-top: 10px;">pHê°€ ë‚®ì„ìˆ˜ë¡ ì‚°ì„±, ë†’ì„ìˆ˜ë¡ ì—¼ê¸°ì„±</p>
            <p>ê¹€ì¹˜ ìµœì  pH: 4.2 ~ 4.5</p>
        </div>
        
        <div class="fermentation-container">
            <div>
                <h3 style="text-align: center; margin-bottom: 10px;">ë°œíš¨ ì¤‘ì¸ ê¹€ì¹˜</h3>
                <div class="kimchi-jar">
                    <div class="kimchi-content" id="kimchiContent" style="height: 80%">
                        ğŸ¥¬
                    </div>
                    <div class="bubble" style="left: 30%; animation-delay: 0s;"></div>
                    <div class="bubble" style="left: 50%; animation-delay: 1s;"></div>
                    <div class="bubble" style="left: 70%; animation-delay: 2s;"></div>
                </div>
            </div>
            
            <div style="flex: 1;">
                <div class="ph-meter">
                    <h3>pH ì¸¡ì •ê¸°</h3>
                    <div class="ph-display" id="phDisplay">6.5</div>
                    <div>í˜„ì¬ ìƒíƒœ: <span id="fermentStatus">ì‹ ì„ í•œ ê¹€ì¹˜</span></div>
                </div>
                
                <div class="ph-scale">
                    <span>0</span>
                    <span>ì‚°ì„±</span>
                    <span>7</span>
                    <span>ì¤‘ì„±</span>
                    <span>14</span>
                    <span>ì—¼ê¸°ì„±</span>
                </div>
            </div>
        </div>
        
        <div class="chemical-equation">
            <h3>ğŸ§ª ì –ì‚° ë°œíš¨ ë°˜ì‘</h3>
            <p>Câ‚†Hâ‚â‚‚Oâ‚† (í¬ë„ë‹¹) â†’ 2 Câ‚ƒHâ‚†Oâ‚ƒ (ì –ì‚°)</p>
            <p style="margin-top: 10px; font-size: 0.9rem;">
                ìœ ì‚°ê· ì´ ë°°ì¶”ì˜ ë‹¹ë¶„ì„ ì –ì‚°ìœ¼ë¡œ ë³€í™˜ â†’ pH ê°ì†Œ
            </p>
        </div>
        
        <div class="controls">
            <div class="control-card">
                <h3>ğŸŒ¡ï¸ ë°œíš¨ ì˜¨ë„</h3>
                <input type="range" id="temperature" min="0" max="30" value="20" oninput="updateDisplay()">
                <div class="value-display"><span id="tempValue">20</span>Â°C</div>
            </div>
            
            <div class="control-card">
                <h3>ğŸ§‚ ì—¼ë„</h3>
                <input type="range" id="salinity" min="1" max="5" value="2.5" step="0.5" oninput="updateDisplay()">
                <div class="value-display"><span id="saltValue">2.5</span>%</div>
            </div>
            
            <div class="control-card">
                <h3>ğŸ“… ë°œíš¨ ì¼ìˆ˜</h3>
                <input type="range" id="days" min="0" max="30" value="0" oninput="updateFermentation()">
                <div class="value-display"><span id="daysValue">0</span>ì¼</div>
            </div>
        </div>
        
        <button class="ferment-button" onclick="startFermentation()">ğŸ§ª ë°œíš¨ ì‹œì‘!</button>
        
        <div class="bacteria-count">
            <div class="bacteria-card">
                <h4>ìœ ì‚°ê·  ìˆ˜</h4>
                <div style="font-size: 2rem;">ğŸ¦ </div>
                <div id="bacteriaCount">10â¶ CFU/mL</div>
            </div>
            <div class="bacteria-card">
                <h4>ì –ì‚° ë†ë„</h4>
                <div style="font-size: 2rem;">ğŸ’§</div>
                <div id="lacticAcid">0.1%</div>
            </div>
            <div class="bacteria-card">
                <h4>ë¹„íƒ€ë¯¼ C</h4>
                <div style="font-size: 2rem;">ğŸŠ</div>
                <div id="vitaminC">100%</div>
            </div>
        </div>
        
        <div class="timeline" id="timeline">
            <h3>ğŸ“… ë°œíš¨ ì§„í–‰ ê³¼ì •</h3>
            <div class="day-marker" data-day="0">
                <div class="day-icon">ğŸ¥¬</div>
                <div>
                    <strong>0ì¼ì°¨ - ë‹´ê¸ˆ</strong>
                    <p>ì‹ ì„ í•œ ë°°ì¶”, pH 6.5, ìœ ì‚°ê·  í™œë™ ì‹œì‘</p>
                </div>
            </div>
            <div class="day-marker" data-day="3">
                <div class="day-icon">ğŸ«§</div>
                <div>
                    <strong>3ì¼ì°¨ - ì´ˆê¸° ë°œíš¨</strong>
                    <p>pH 5.5, íƒ„ì‚°ê°€ìŠ¤ ë°œìƒ, ì‹œí¼í•œ í–¥</p>
                </div>
            </div>
            <div class="day-marker" data-day="7">
                <div class="day-icon">ğŸŒ¶ï¸</div>
                <div>
                    <strong>7ì¼ì°¨ - ì ìˆ™ê¸°</strong>
                    <p>pH 4.3, ìµœì ì˜ ë§›ê³¼ ì˜ì–‘, ë¨¹ê¸° ì¢‹ì€ ìƒíƒœ</p>
                </div>
            </div>
            <div class="day-marker" data-day="14">
                <div class="day-icon">ğŸƒ</div>
                <div>
                    <strong>14ì¼ì°¨ - ìˆ™ì„±</strong>
                    <p>pH 4.0, ê¹Šì€ ë§›, ìœ ì‚°ê·  ìµœëŒ€</p>
                </div>
            </div>
            <div class="day-marker" data-day="30">
                <div class="day-icon">ğŸ¥ƒ</div>
                <div>
                    <strong>30ì¼ì°¨ - ë¬µì€ì§€</strong>
                    <p>pH 3.8, ì§„í•œ ë°œíš¨í–¥, ë¬µì€ì§€ íŠ¹ìœ ì˜ ë§›</p>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        let fermentationInterval;
        let currentDay = 0;
        
        function updateDisplay() {
            document.getElementById('tempValue').textContent = document.getElementById('temperature').value;
            document.getElementById('saltValue').textContent = document.getElementById('salinity').value;
        }
        
        function updateFermentation() {
            const days = parseInt(document.getElementById('days').value);
            document.getElementById('daysValue').textContent = days;
            
            // pH ê³„ì‚° (ë‚ ì§œì— ë”°ë¼ ê°ì†Œ)
            const temp = parseFloat(document.getElementById('temperature').value);
            const salt = parseFloat(document.getElementById('salinity').value);
            
            // ì˜¨ë„ì™€ ì—¼ë„ì— ë”°ë¥¸ ë°œíš¨ ì†ë„ ì¡°ì •
            const fermentRate = (temp / 20) * (3 / salt);
            let pH = 6.5 - (days * 0.08 * fermentRate);
            pH = Math.max(3.5, pH); // ìµœì†Œ pH 3.5
            
            document.getElementById('phDisplay').textContent = pH.toFixed(1);
            
            // ê¹€ì¹˜ ìƒ‰ê¹” ë³€í™”
            const kimchi = document.getElementById('kimchiContent');
            const redness = Math.min(100, days * 3);
            kimchi.style.background = 'linear-gradient(to bottom, ' +
                'hsl(0, ' + redness + '%, 50%) 0%, ' +
                'hsl(0, ' + redness + '%, 40%) 100%)';
            
            // ìƒíƒœ ì—…ë°ì´íŠ¸
            let status = '';
            if (pH > 5.5) status = 'ì‹ ì„ í•œ ê¹€ì¹˜';
            else if (pH > 4.5) status = 'ì‚´ì§ ìµì€ ê¹€ì¹˜';
            else if (pH > 4.0) status = 'ì˜ ìµì€ ê¹€ì¹˜ (ìµœì )';
            else status = 'ë¬µì€ì§€';
            
            document.getElementById('fermentStatus').textContent = status;
            
            // ìœ ì‚°ê·  ìˆ˜ ì¦ê°€
            const bacteria = Math.min(9, 6 + days * 0.1);
            document.getElementById('bacteriaCount').textContent = '10^' + bacteria.toFixed(0) + ' CFU/mL';
            
            // ì –ì‚° ë†ë„
            const lactic = (days * 0.1).toFixed(1);
            document.getElementById('lacticAcid').textContent = lactic + '%';
            
            // ë¹„íƒ€ë¯¼ C (ì´ˆê¸°ì— ì¦ê°€ í›„ ê°ì†Œ)
            let vitC = 100 + days * 5;
            if (days > 7) vitC = 135 - (days - 7) * 2;
            vitC = Math.max(50, vitC);
            document.getElementById('vitaminC').textContent = vitC.toFixed(0) + '%';
            
            // íƒ€ì„ë¼ì¸ í™œì„±í™”
            document.querySelectorAll('.day-marker').forEach(marker => {
                const markerDay = parseInt(marker.dataset.day);
                if (days >= markerDay) {
                    marker.classList.add('active');
                } else {
                    marker.classList.remove('active');
                }
            });
        }
        
        function startFermentation() {
            clearInterval(fermentationInterval);
            currentDay = 0;
            document.getElementById('days').value = 0;
            
            fermentationInterval = setInterval(() => {
                currentDay++;
                if (currentDay <= 30) {
                    document.getElementById('days').value = currentDay;
                    updateFermentation();
                } else {
                    clearInterval(fermentationInterval);
                }
            }, 500); // 0.5ì´ˆë§ˆë‹¤ 1ì¼ ê²½ê³¼ (ì‹œë®¬ë ˆì´ì…˜)
        }
        
        // ì´ˆê¸°í™”
        updateDisplay();
        updateFermentation();
    </script>
</body>
</html>